Cr-Regions-Info
===================

Вывод индивидуального меню, и рекламных блоков для выбранных регионов, выбор осуществляется вручную.

Список шорткодов
___________

#### Шорткоды для создания меню

* Установка маркированного списка
 
``` [cr_ul][/cr_ul]
Параметров не имеет
Возвращает - <ul></ul>
Элемент Списка
[cr_li icon={}][/cr_li]
Параметры:
    Icon - url иконки
Возвращает - <li class='cr-menu-li'><span class='cr-menu-span'><img src="{url иконки}"></span></li>
```
    
* Колонки

```
[cr_column width={} position={}][/cr_column]
Параметры:
    width - ширина колонки (по умолчанию 30%)
    position - добавляет классы для первой и последней колонки first - первая, last - последняя
Возвращает - <div class='cr-columns {position}' style='width:{width}' ></div>
```

* Очистка
```
[cr_clear]
Параметров не имеет
Возвращает - <div class='cr-clear'></div>
Рекомендется вставлять после использования колонок, для сброса обтекания
```
* Использование
```
    [cr_column position=first][cr_ul][cr_li icon=http://www.wp-panda.panda/wp-content/uploads/2014/04/lightbulb.png]Пункт Астаны[/cr_li][cr_li icon= http://www.wp-panda.panda/wp-content/uploads/2014/04/lightbulb.png]Пункт Астаны[/cr_li][/cr_ul][/cr_column]
    [cr_column position=first][cr_ul][cr_li icon=http://www.wp-panda.panda/wp-content/uploads/2014/04/lightbulb.png]Пункт Астаны[/cr_li][cr_li icon= http://www.wp-panda.panda/wp-content/uploads/2014/04/lightbulb.png]Пункт Астаны[/cr_li][/cr_ul][/cr_column]
    [cr_column position=last][cr_ul][cr_li icon=http://www.wp-panda.panda/wp-content/uploads/2014/04/lightbulb.png]Пункт Астаны[/cr_li][cr_li icon= http://www.wp-panda.panda/wp-content/uploads/2014/04/lightbulb.png]Пункт Астаны[/cr_li][/cr_ul][/cr_column]
    [cr_clear]
```
####Шорткод селекта региона
```
[cr_region_select]
Параметров не имеет
Возвращает селект выбора региона, наполнение селекта происходит автоматически.
```
#### Шорткод вывода меню
```
[cr_region_menu]
Параметров не имеет
Возвращает Меню Регионов, По умолчанию выводит меню первого региона из селекта, дальше выбранный.
```
#### Шорткод вывода баннера
```
    [cr_region_banner tag={} w={} h={} crop={} class={}]
    Возвращает Баннер Регионов определенный меткой, По умолчанию выводит меню первого региона из селекта, дальше выбранный.
    Параметры:
        w - ширина баннера
        h - высота баннера
        crop - строгая обрезка или масштабирование (может принимать true или false)
        tag - идентификатор (код) баннера
        class - дополнительный класс, параметр не обязательный
    Возвращает Меню Регионов, По умолчанию выводит меню первого региона из селекта, дальше выбранный.
    <div class='banner-region'>
        <a href='{href}'><img class='{class}' src='{url}' alt=''></a>
    </div>
```
Все шорткоды из блока выше можно использовать в записях, постах виджетах, например для вывода в каждой записи своего баннера для своего региона.

Наполнение.
___________________

1.Необходимо завести регионы, для этого Необходимо в меню административной части сайта выбрать пункт Информация, в нем подпункт регионы. В выбранной вкладке ввести регионы. ВНИМАНИЕ!!! для корректной работы Ярлык(слаг) должен быть набран латиницей.
2. Дальше можно добавлять меню и баннеры, для этого Необходимо в меню административной части сайта выбрать пункт Информация, в нем выбрать подпункт Добавить новую.

#### Меню
* В правом верхнем блоке Тип Записи выбрать в селекте тип Меню.
* В правом блоке Регионы выбрать Регион Меню.
* Для идентификации меню Ввести название меню, например Меню Астана, данное название нигде не используется, но заводить необходимо.
* В области контента построить меню с помощью шорткодов, их можно и не использовать но с ними будет удобнее.

#### Баннер
* В правом верхнем блоке Тип Записи выбрать в селекте тип Баннер.
* В правом верхнем блоке Тип Записи Ввести в поле Ссылка с баннера Ссылку.
* В правом верхнем блоке Тип Записи Ввести в поле Koд баннера, индивидуальный идентификатор группы баннера, должен быть одинаковым у всех баннеров регионов отображаемых в однной с ним группе (например banner_1).
* Для идентификации баннера Ввести название баннера, например Баннер Астана 1, данное название нигде не используется, но заводить необходимо.
* В правом блоке миниатюра записи установить Изображение Баннера.

Вывод
________________________

* Любой блок в записи можно вывести с помощю соответствующего шорткода.
* В коде с помощю шорткода но обеpнув его функцией `<php echo do_shortcode( [шорткод] ); ?>`
* С помощю функций
```
<?php echo cr_region_select(); ?> - Селектор Регионов
<?php echo get_cr_region_menu(); ?> - Меню Регионов
<?php echo get_cr_region_banner($tag,$w,$h,$crop,$class=null); ?> -Баннер Регионов
Параметры те же что и у шорткода
$tag - идентификатор
$w - ширина
$h - высота
$crop - обрезка (true,false)
$class - дополнительный класс ( параметр необязательный )
Пример использования <?php echo get_cr_region_banner('banner_1',150, 220, true ); ?>
```


Так же вывод объектов для выбора можно осуществить с помощю HTML кода, вставив внутрь любое содержимое.

В необходимом месте добавляем такой код.
```
<div id="cr-region-selectred">
        <span data-value="astana"><img width='80px' src="http://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/New_coat_of_arms_of_Astana.svg/150px-New_coat_of_arms_of_Astana.svg.png" alt=""></span>
        <span data-value="almaty"><img width='80px' src="http://upload.wikimedia.org/wikipedia/commons/thumb/9/93/Coat_of_arms_of_Almaty.svg/90px-Coat_of_arms_of_Almaty.svg.png" alt=""></span>
 </div>
``` 

У span атрибут data-value должен совпадать со слагом города
внутри span может быть любое содержимое, для примера поставил гербы астаны и алма-аты из википедии, но можно и текст и все что угодно.

#### v- 1.04
* Добавлен редирект на главную страницу при выборе региона.

